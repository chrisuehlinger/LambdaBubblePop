<html>
  <head>
   <!-- Bower Components -->
    <script src="bower_components/react/react-with-addons.js"></script>
    <script src="bower_components/lodash/dist/lodash.js"></script>
    <script src="bower_components/node-uuid/uuid.js"></script>

    <!-- Line Components -->
    <script src="components/Mixins.js"></script>
    <script src="components/LineComponent.js"></script>
    <script src="components/ApplicationComponent.js"></script>
    <script src="components/FunctionNameComponent.js"></script>
    <script src="components/ListComponent.js"></script>
    <script src="components/IntComponent.js"></script>
    <script src="components/LinesComponent.js"></script>
    <script src="components/NodeComponent.js"></script>
    <script src="components/FunctionEditorComponent.js"></script>
    <script src="components/ProgramComponent.js"></script>

    <!-- AST Operations -->
    <script src="ast_transformations.js"></script>
    <script src="initial_ast.js"></script>

    <!-- Parser -->
    <script src="haskell-parser.js"></script>

    <!-- Functions -->
    <script src="functions/map.js"></script>
    <script src="functions/plusOne.js"></script>
    <script src="functions/cons.js"></script>
    <script src="functions/plus.js"></script>

    <!-- AST Node Types -->
    <script src="astNodeType/int.js"></script>
    <script src="astNodeType/list.js"></script>
    <script src="astNodeType/application.js"></script>
    <script src="astNodeType/functionName.js"></script>


    <!-- Styles -->
    <link rel="stylesheet" href="app.css">
  </head>
  <body>
    <div id="function-editor"></div>

    <div id="title">
      <h1 style="font-size:1.5em; margin-bottom:0px;">Lambda Lessons</h1>
      <h2 style="font-size:1em; color: gray; margin-top:0px;">Pattern-matching, first-class functions, and asbtracting over recursion</h2>
    </div>

    <div id="mapLesson">
      <div style="margin-bottom:5px"><code class="mapInLesson" style="font-size:1.8em; font-weight:bold; margin-bottom:10px">map</code></div>
      <div>
        <code class="mapInLesson">map</code> is a Haskell function that performs some operation on every element in a list.
      </div>

      <pre><div class="mapLessonTypeSignature">map :: (a -> b) -> [a] -> [b]</div><div class="mapLessonBaseCase">map f [] = []</div><div class="mapLessonRecursiveCase">map f (x:xs) = f x : map f xs</div></pre>

      <div class="mapLessonTypeSignature" >
        <span><code class="mapInLesson">map</code> takes two inputs</span>
          <ul style="padding-left: 30px;margin-top: 5px;">
            <li>a function of type <code>(a -> b)</code></li>
            <li>a list of type <code>[a]</code></li>
          </ul>
          <span>and returns</span>
          <ul style="padding-left: 30px;margin-top: 5px;">
            <li>a list of type <code>[b]</code></li>
          </ul>

      </div>

      <div class="mapLessonPatternMatches" style="padding-top: 10px;">
        <div class="mapLessonBaseCase">
          The base-case of <code class="mapInLesson">map</code> pattern matches on <code>[]</code> and returns <code>[]</code>.
        </div>
       </br>
        <div  class="mapLessonRecursiveCase">
           The recursive-case pattern matches on the first element (<code>x</code>) and returns <code>(f x) : map f xs</code>.
         </div>
      </div>
    </div>

    <hr>

    <div id="lines"></div>
  </body>
  <script>
    var toggleLessonHighlight = function(e) {
      var blahs = document.getElementsByClassName(e.target.classList[0]);
      for (var i = 0; i < blahs.length; i ++){
        blah = blahs[i];
        blah.classList.toggle("map-lesson-highlight");
      };
    };

    names = ['mapLessonRecursiveCase', 'mapLessonBaseCase', 'mapLessonTypeSignature']
    for (var j = 0; j < names.length; j++) {
      var name = names[j];

      var things = document.getElementsByClassName(name);
      for (var i = 0; i < things.length; i ++){
        thing = things[i];
        thing.addEventListener('mouseenter', toggleLessonHighlight);
        thing.addEventListener('mouseleave', toggleLessonHighlight);
      }
    }

    React.renderComponent(
      HaskellJSProgram({defaultValue: 'map addOne [1 2 3 4 5]'}),
      document.getElementById('lines')
    );

    React.renderComponent(
      FunctionEditor({defaultFunctionDefinitions: window.initialFunctionDefinitions}),
      document.getElementById('function-editor')
    );
  </script>
</html>
