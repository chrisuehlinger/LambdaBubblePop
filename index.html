<html>
  <head>
    <title>&#955; Bubble Pop!</title>
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">

    <!-- Styles -->
    <link rel="stylesheet" href="app.css">

   <!-- Bower Components -->
    <script src="bower_components/react/react-with-addons.js"></script>
    <script src="bower_components/lodash/dist/lodash.js"></script>
    <script src="bower_components/node-uuid/uuid.js"></script>

    <!-- Line Components -->
    <script src="components/Mixins.js"></script>
    <script src="components/LineComponent.js"></script>
    <script src="components/ApplicationComponent.js"></script>
    <script src="components/FunctionNameComponent.js"></script>
    <script src="components/ListComponent.js"></script>
    <script src="components/IntComponent.js"></script>
    <script src="components/LinesComponent.js"></script>
    <script src="components/NodeComponent.js"></script>
    <script src="components/FunctionEditorComponent.js"></script>
    <script src="components/ProgramComponent.js"></script>

    <!-- AST Operations -->
    <script src="ast_transformations.js"></script>
    <script src="initial_ast.js"></script>

    <!-- Parser -->
    <script src="haskell-parser.js"></script>

    <!-- Functions -->
    <script src="functions/cons.js"></script>
    <script src="functions/plus.js"></script>
    <script src="functions/minus.js"></script>

    <!-- AST Node Types -->
    <script src="astNodeType/int.js"></script>
    <script src="astNodeType/list.js"></script>
    <script src="astNodeType/application.js"></script>
    <script src="astNodeType/functionName.js"></script>
  </head>
  <body>
    <a href="https://github.com/chrisuehlinger/LambdaBubblePop">
      <img  style="position: absolute; top: 0; right: 0; border: 0;" 
            src="https://camo.githubusercontent.com/e7bbb0521b397edbd5fe43e7f760759336b5e05f/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f677265656e5f3030373230302e706e67" 
            alt="Fork me on GitHub" 
            data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png">
    </a>

    <article>
      <div id="top-section">
        <div id="title">
          <h1><span class="titleBubble">&#955;</span> Bubble Pop!</h1>
          <h2>Or, Lambda The Ultimate Bubble Wrap</h2>
          <h3>An educational toy based on <a href="https://stevekrouse.github.io/hs.js/">&#955; Lessons</a> by <a href="http://janpaulposma.nl/">Jan Paul Posma</a> and <a href="http://stevekrouse.com/">Steve Krouse</a></h3>
          <h4>Fondly mangled by <a href="https://chrisuehlinger.com/">Chris Uehlinger</a></h4>
        </div>

        <div class="introText">
          <p>
            Ever thought that LISP sexps were like little bubbles of computation, waiting to be popped to reveal their evaluated center? No? You will now! Click on the bubbles to pop them, pop them all to complete the computation! It's the satisfaction of popping bubble wrap, combined with the satisfaction of really elegant functional programming!
          </p>

          <p>
            If you want to use functions other than the ones that have been defined, you can add them to the Bubble Mix at the bottom of the page.
          </p>
        </div>
      </div>

      <div id="allLessons">
        <div id="mapLines"></div>
        <div id="foldrLines"></div>
        <div id="foldlLines"></div>
      </div>
      <div class="introText">
        <p>
          <strong>Note:</strong> Like &#955; Lessons, this project uses a subset of Haskell that only supports integers and lists (it also uses LISP style parentheses, as you'll notice if you edit any of the bubbles). I'm working on adding support for more rich types (or at least Booleans and Strings). You can check out the Peg.js file if you're interested in taking a crack at it. 
        </p>

        <p>
          I hope you find this as viscerally appealing as I do. Enjoy!
        </p>
      </div>
      <div id="function-editor"></div>
    </article>
  </body>
  <script>
    var toggleLessonHighlight = function(e) {
      var blahs = document.getElementsByClassName(e.target.classList[0]);
      for (var i = 0; i < blahs.length; i ++){
        blah = blahs[i];
        blah.classList.toggle("lesson-highlight");
      };
    };

    React.renderComponent(
      HaskellJSProgram({defaultValue: 'map addOne [1,2,3,4,5]'}),
      document.getElementById('mapLines')
    );

    React.renderComponent(
      HaskellJSProgram({defaultValue: 'foldr plus 0 [1,2,3,4,5]'}),
      document.getElementById('foldrLines')
    );

    React.renderComponent(
      HaskellJSProgram({defaultValue: 'foldl reverseCons [] [1,2,3,4,5]'}),
      document.getElementById('foldlLines')
    );

    React.renderComponent(
      FunctionEditor({defaultFunctionDefinitions: window.initialFunctionDefinitions}),
      document.getElementById('function-editor')
    );
  </script>
</html>
